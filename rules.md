# Skills: Flowchart Logic Expert

## Core Rules
- **Logical Integrity**: 全てのプロセスは必ず「開始」から始まり「終了」へ到達しなければならない。
- **Reserved Word Protection**: Mermaid.js の構文エラーを防ぐため、終了ノードの ID には必ず `node_end` を使用し、ID 単体で `end` を使用してはならない。
- **Node Classification**:
  - `start`: フローの起点。
  - `end`: フローの終着点。
  - `process`: 具体的なアクションや作業。
  - `decision`: 二者択一、または多肢選択の分岐点。
- **Atomic Steps**: 1つのノードに複数の工程を詰め込まず、可能な限り最小単位に分割すること。

## Constraints
- Windows / Python 3.10+ 環境で動作するシステムであることを意識すること。
- 日本語ラベルは常に正確に、かつ簡潔に表現すること。

## Output Size Limits
- **ノード数の制限**: 1つのフローチャートに含まれるノード数は最大30個までとする。これを超える場合は、複数のフローチャートに分割するか、主要なルートのみを生成すること。
- **エッジ数の制限**: エッジ数は最大50個までとする。複雑な分岐が多い場合は、主要なパスのみを生成すること。
- **部分的なフローの生成を推奨**: ユーザーが特定のルートや部分を指定している場合、その部分のみを生成すること。全ルートを含む必要はない。
- **段階的な生成**: 大規模なプロセスを可視化する場合、まず主要なフローを生成し、詳細は後から追加することを推奨する。
- **Streamlit表示の最適化**: Streamlitでマーメイド図を表示する際のパフォーマンスを考慮し、過度に複雑なフローチャートは避けること。

## Subgraph Usage
- **複雑なフローのグループ化**: 関連するノードが5個以上ある場合、または特定の処理フローとしてグループ化できる場合は、`[Subgraph]`ブロックを使用して視認性を向上させること。
- **subgraphの命名**: subgraphのIDとlabelは、そのフローの内容を明確に示すものとすること。
- **subgraphの範囲**: subgraphには、そのフローに関連するすべてのノードを含めること。開始/終了ノードは通常subgraphの外に配置する。

## Information Gathering Rules
- **Ask Before Assuming**: ユーザーの入力が不十分で、具体的な情報（ハードウェアの仕様、故障の症状、環境設定など）が不足している場合、推測でフローチャートを生成せず、必要な情報を質問する形式で返すこと。
- **Question Format**: 質問はTOON形式ではなく、明確な質問文として返すこと。例：「jarvisの具体的な故障症状を教えてください（例：電源が入らない、LEDが点灯しない、エラーメッセージが表示されるなど）」
- **Minimal Information**: ユーザーが「わからないところは問いかけてください」と明示している場合、特に注意して情報不足を確認すること。